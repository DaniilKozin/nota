# AssemblyAI Fix - Test Instructions

## –ß—Ç–æ –∏—Å–ø—Ä–∞–≤–∏–ª–∏

### –ü—Ä–æ–±–ª–µ–º–∞
- –ù–µ—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ AssemblyAI API
- –ê—É–¥–∏–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–ª–æ—Å—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞

### –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

1. **URL –ø–∞—Ä–∞–º–µ—Ç—Ä—ã** - –î–æ–±–∞–≤–∏–ª–∏ `sample_rate=16000` –≤ URL
2. **–§–æ—Ä–º–∞—Ç –∞—É–¥–∏–æ** - –û—Ç–ø—Ä–∞–≤–ª—è–µ–º RAW PCM data (binary), –∞ –Ω–µ base64/JSON
3. **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ** - –î–æ–±–∞–≤–∏–ª–∏ –ø–æ–¥—Ä–æ–±–Ω—ã–µ –ª–æ–≥–∏ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

### –ò–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–¥–µ

```swift
// –ë–´–õ–û (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
let base64Audio = newData.base64EncodedString()
let json = ["audio_data": base64Audio]
websocket.send(.string(jsonString))

// –°–¢–ê–õ–û (–ø—Ä–∞–≤–∏–ª—å–Ω–æ):
let message = URLSessionWebSocketTask.Message.data(newData)
websocket.send(message)
```

## –ö–∞–∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å

### 1. –£—Å—Ç–∞–Ω–æ–≤–∫–∞
```bash
# –û—Ç–∫—Ä–æ–π—Ç–µ Nota-v2.3.1-fixed.dmg
# –ü–µ—Ä–µ—Ç–∞—â–∏—Ç–µ –≤ Applications
# –ü—Ä–∞–≤—ã–π –∫–ª–∏–∫ ‚Üí –û—Ç–∫—Ä—ã—Ç—å
```

### 2. –ó–∞–ø—É—Å–∫ —Å –ª–æ–≥–∞–º–∏

–û—Ç–∫—Ä–æ–π—Ç–µ **Console.app** (–ö–æ–Ω—Å–æ–ª—å):
1. Cmd+Space ‚Üí "Console"
2. –í –ø–æ–∏—Å–∫–µ –≤–≤–µ–¥–∏—Ç–µ: `Nota`
3. –ù–∞–∂–º–∏—Ç–µ Start

### 3. –¢–µ—Å—Ç –∑–∞–ø–∏—Å–∏

1. –ù–∞–∂–º–∏—Ç–µ –Ω–∞ –∏–∫–æ–Ω–∫—É –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞ –≤ –º–µ–Ω—é –±–∞—Ä–µ
2. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É **Record**
3. –°–∫–∞–∂–∏—Ç–µ —á—Ç–æ-–Ω–∏–±—É–¥—å: "Hello, this is a test"
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 3-5 —Å–µ–∫—É–Ω–¥

### 4. –ß—Ç–æ —Å–º–æ—Ç—Ä–µ—Ç—å –≤ –ª–æ–≥–∞—Ö

#### ‚úÖ –•–æ—Ä–æ—à–∏–µ –ª–æ–≥–∏ (–¥–æ–ª–∂–Ω—ã –±—ã—Ç—å):

```
üéôÔ∏è Starting AssemblyAI v3 WebSocket streaming...
üì° WebSocket URL: wss://streaming.assemblyai.com/v3/ws?sample_rate=16000
‚úÖ AssemblyAI WebSocket connecting...
üé§ Starting audio streaming to AssemblyAI...
‚úÖ Audio recording started to file: recording_1234567890.wav
üéôÔ∏è Audio level: -25.3dB
üìÅ File size: 32000 bytes
üì§ Sent 3200 bytes to AssemblyAI
‚úÖ AssemblyAI session started: [session-id]
üìù AssemblyAI interim: Hello this is...
‚úÖ AssemblyAI final: Hello this is a test
```

#### ‚ùå –ü–ª–æ—Ö–∏–µ –ª–æ–≥–∏ (–ø—Ä–æ–±–ª–µ–º—ã):

```
‚ùå Failed to send audio to AssemblyAI: [error]
‚ùå AssemblyAI WebSocket error: [error]
‚ùå Recording error: [error]
üéôÔ∏è Audio level: -160.0dB  // –ù–µ—Ç –∑–≤—É–∫–∞!
üìÅ File size: 0 bytes      // –§–∞–π–ª –ø—É—Å—Ç–æ–π!
```

### 5. –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ AssemblyAI Dashboard

1. –û—Ç–∫—Ä–æ–π—Ç–µ https://www.assemblyai.com/app/dashboard
2. –í–æ–π–¥–∏—Ç–µ —Å –≤–∞—à–∏–º API –∫–ª—é—á–æ–º
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **Usage** ‚Üí –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –∑–∞–ø—Ä–æ—Å—ã
4. –ï—Å–ª–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –Ω–µ—Ç - –∞—É–¥–∏–æ –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è

## –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ù–µ—Ç –∑–≤—É–∫–∞ (-160dB)

**–ü—Ä–∏—á–∏–Ω–∞**: –ú–∏–∫—Ä–æ—Ñ–æ–Ω –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–ª–∏ –Ω–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
System Settings ‚Üí Privacy & Security ‚Üí Microphone ‚Üí Nota ‚úì
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: File size: 0 bytes

**–ü—Ä–∏—á–∏–Ω–∞**: AVAudioRecorder –Ω–µ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –º–∏–∫—Ä–æ—Ñ–æ–Ω –≤—ã–±—Ä–∞–Ω –≤ Settings
- –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –º–∏–∫—Ä–æ—Ñ–æ–Ω
- –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

### –ü—Ä–æ–±–ª–µ–º–∞ 3: WebSocket error

**–ü—Ä–∏—á–∏–Ω–∞**: –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π API –∫–ª—é—á –∏–ª–∏ –Ω–µ—Ç –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞

**–†–µ—à–µ–Ω–∏–µ**:
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á –≤ Settings
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
ping assemblyai.com
```

### –ü—Ä–æ–±–ª–µ–º–∞ 4: Sent 0 bytes

**–ü—Ä–∏—á–∏–Ω–∞**: –ê—É–¥–∏–æ —Ñ–∞–π–ª –Ω–µ —Ä–∞—Å—Ç–µ—Ç

**–†–µ—à–µ–Ω–∏–µ**:
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –∑–∞–ø–∏—Å—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ –∏–¥–µ—Ç
- –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª –≤ ~/Documents/
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ —Ñ–∞–π–ª–∞–º

## –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

### ‚úÖ –£—Å–ø–µ—Ö:
- –õ–æ–≥–∏ –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Ç–ø—Ä–∞–≤–∫—É –±–∞–π—Ç–æ–≤
- AssemblyAI Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –æ–∫–Ω–µ
- –¢–µ–∫—Å—Ç –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

### ‚ùå –ü—Ä–æ–≤–∞–ª:
- –ù–µ—Ç –ª–æ–≥–æ–≤ "Sent X bytes"
- AssemblyAI Dashboard –ø—É—Å—Ç–æ–π
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –Ω–µ –ø–æ—è–≤–ª—è–µ—Ç—Å—è
- –û–∫–Ω–æ –ø—É—Å—Ç–æ–µ

## –û—Ç–ª–∞–¥–∫–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 1: –ê—É–¥–∏–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è?

```bash
# –ù–∞–π–¥–∏—Ç–µ —Ñ–∞–π–ª –∑–∞–ø–∏—Å–∏
ls -lh ~/Documents/recording_*.wav

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–∑–º–µ—Ä (–¥–æ–ª–∂–µ–Ω —Ä–∞—Å—Ç–∏)
watch -n 1 'ls -lh ~/Documents/recording_*.wav'
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 2: WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω?

–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```
‚úÖ AssemblyAI WebSocket connecting...
‚úÖ AssemblyAI session started: [id]
```

–ï—Å–ª–∏ –Ω–µ—Ç - –ø—Ä–æ–±–ª–µ–º–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 3: –ê—É–¥–∏–æ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è?

–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```
üì§ Sent 3200 bytes to AssemblyAI
üì§ Sent 1600 bytes to AssemblyAI
üì§ Sent 3200 bytes to AssemblyAI
```

–ï—Å–ª–∏ –Ω–µ—Ç - –∞—É–¥–∏–æ –Ω–µ —á–∏—Ç–∞–µ—Ç—Å—è –∏–∑ —Ñ–∞–π–ª–∞.

### –ü—Ä–æ–≤–µ—Ä–∫–∞ 4: –û—Ç–≤–µ—Ç—ã –ø—Ä–∏—Ö–æ–¥—è—Ç?

–°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏:
```
üìù AssemblyAI interim: [text]
‚úÖ AssemblyAI final: [text]
```

–ï—Å–ª–∏ –Ω–µ—Ç - AssemblyAI –Ω–µ –æ—Ç–≤–µ—á–∞–µ—Ç.

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### –ï—Å–ª–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. ‚úÖ –†–µ–ª–∏–∑ v2.3.1-fixed
2. üéâ –ü—Ä–∞–∑–¥–Ω—É–µ–º!
3. üîÑ –ù–∞—á–∏–Ω–∞–µ–º —Ä–∞–±–æ—Ç—É –Ω–∞–¥ BlackHole fix

### –ï—Å–ª–∏ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. üìã –°–æ–±–µ—Ä–∏—Ç–µ –ª–æ–≥–∏ –∏–∑ Console.app
2. üì∏ –°–¥–µ–ª–∞–π—Ç–µ —Å–∫—Ä–∏–Ω—à–æ—Ç AssemblyAI Dashboard
3. üìù –û–ø–∏—à–∏—Ç–µ —á—Ç–æ –∏–º–µ–Ω–Ω–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
4. üîç –ü—Ä–æ–¥–æ–ª–∂–∏–º –æ—Ç–ª–∞–¥–∫—É

## –ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –°–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
log stream --predicate 'process == "Nota"' --level debug

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∞—É–¥–∏–æ —Ñ–∞–π–ª—ã
ls -lh ~/Documents/recording_*.wav

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑–º–µ—Ä —Ñ–∞–π–ª–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
watch -n 1 'ls -lh ~/Documents/recording_*.wav | tail -1'

# –£–¥–∞–ª–∏—Ç—å —Å—Ç–∞—Ä—ã–µ –∑–∞–ø–∏—Å–∏
rm ~/Documents/recording_*.wav

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –º–∏–∫—Ä–æ—Ñ–æ–Ω–∞
tccutil reset Microphone com.nota.app
```

## –ö–æ–Ω—Ç—Ä–æ–ª—å–Ω—ã–π —Å–ø–∏—Å–æ–∫

- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ
- [ ] Console.app –æ—Ç–∫—Ä—ã—Ç –∏ —Ñ–∏–ª—å—Ç—Ä—É–µ—Ç "Nota"
- [ ] –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ Record
- [ ] –ì–æ–≤–æ—Ä—é –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω
- [ ] –í–∏–∂—É –ª–æ–≥–∏ "Audio level: -XX.XdB" (–Ω–µ -160!)
- [ ] –í–∏–∂—É –ª–æ–≥–∏ "File size: XXXX bytes" (—Ä–∞—Å—Ç–µ—Ç!)
- [ ] –í–∏–∂—É –ª–æ–≥–∏ "Sent XXXX bytes"
- [ ] –í–∏–∂—É –ª–æ–≥–∏ "AssemblyAI session started"
- [ ] –í–∏–∂—É –ª–æ–≥–∏ "AssemblyAI interim/final"
- [ ] –¢–µ–∫—Å—Ç –ø–æ—è–≤–ª—è–µ—Ç—Å—è –≤ –æ–∫–Ω–µ
- [ ] AssemblyAI Dashboard –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∑–∞–ø—Ä–æ—Å—ã

## –†–µ–∑—É–ª—å—Ç–∞—Ç —Ç–µ—Å—Ç–∞

**–î–∞—Ç–∞**: ___________  
**–í–µ—Ä—Å–∏—è**: v2.3.1-fixed

**–†–∞–±–æ—Ç–∞–µ—Ç?**: ‚¨ú –î–∞ / ‚¨ú –ù–µ—Ç

**–ü—Ä–æ–±–ª–µ–º—ã**:
```
1. 
2. 
3. 
```

**–õ–æ–≥–∏** (–ø—Ä–∏–∫—Ä–µ–ø–∏—Ç–µ):
```
[–≤—Å—Ç–∞–≤—å—Ç–µ –ª–æ–≥–∏ –∏–∑ Console.app]
```
